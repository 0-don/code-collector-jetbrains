<idea-plugin>
    <id>don.codecollector</id>
    <name>Code Collector</name>
    <vendor email="don.cryptus@gmail.com" url="https://github.com/0-don">0-don</vendor>

    <description><![CDATA[
    <p><strong>Copy all your code files so you can paste them to AI assistants like ChatGPT.</strong></p>

    <h3>What it does</h3>
    <ul>
      <li>Right-click on files → copies all your code</li>
      <li>Automatically finds related files that work together</li>
      <li>Puts everything in a nice format with file names and line numbers</li>
      <li>Perfect for asking AI to help with your code</li>
    </ul>

    <h3>Two ways to use it</h3>
    <ul>
      <li><strong>Selected files</strong>: Right-click files/folders → "Code Collect"</li>
      <li><strong>Entire project</strong>: Right-click anywhere → "Code Collect All"</li>
    </ul>

    <h3>What you get</h3>
    <pre>// src/main/kotlin/MyClass.kt (L1-L50)
    [your actual code here]

    // src/main/kotlin/AnotherClass.kt (L51-L100)
    [more code here]</pre>

    <p>Everything goes to your clipboard automatically. Just paste it into ChatGPT, Claude, or any AI assistant!</p>

    <h3>Smart features</h3>
    <ul>
      <li>Skips build files, libraries, and generated code</li>
      <li>Only includes your actual source code</li>
      <li>Works with Java and Kotlin projects</li>
      <li>Customizable ignore patterns in settings</li>
    </ul>
    ]]></description>

    <change-notes><![CDATA[
        <ul>
            <li>Initial release</li>
            <li>Smart import analysis for Java/Kotlin</li>
            <li>AI-optimized code context collection</li>
            <li>Configurable ignore patterns</li>
        </ul>
    ]]></change-notes>

    <!-- Core dependencies -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>org.jetbrains.kotlin</depends>

    <!-- K2 compatibility declaration -->
    <extensions defaultExtensionNs="org.jetbrains.kotlin">
        <supportsKotlinPluginMode supportsK2="true"/>
    </extensions>

    <extensions defaultExtensionNs="com.intellij">
        <notificationGroup id="Code Collector" displayType="BALLOON"/>
        <projectConfigurable
                parentId="tools"
                instance="don.codecollector.settings.CodeCollectorConfigurable"
                id="don.codecollector.settings"
                displayName="Code Collector"/>
    </extensions>

    <actions>
        <action id="don.codecollector.gatherImports"
                class="don.codecollector.actions.CodeCollectAction"
                text="Code Collect (with imports)"
                description="Collect code context based on imports">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="before"
                          relative-to-action="CutCopyPasteGroup"/>
            <add-to-group group-id="EditorPopupMenu" anchor="after" relative-to-action="$Copy"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift G"/>
        </action>

        <action id="don.codecollector.collectSimple"
                class="don.codecollector.actions.CodeCollectSimpleAction"
                text="Code Collect (selected only)"
                description="Collect only selected files without following imports">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="after"
                          relative-to-action="don.codecollector.gatherImports"/>
            <add-to-group group-id="EditorPopupMenu" anchor="after"
                          relative-to-action="don.codecollector.gatherImports"/>
        </action>

        <action id="don.codecollector.collectAll"
                class="don.codecollector.actions.CodeCollectAllAction"
                text="Code Collect All"
                description="Collect all project code">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="after"
                          relative-to-action="don.codecollector.collectSimple"/>
        </action>
    </actions>
</idea-plugin>